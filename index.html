<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Juego de Nombres para Nenas</title>
  <style>
    :root { --bg:#0f172a; --fg:#e5e7eb; --muted:#94a3b8; --accent:#22d3ee; --card:#0e1626; --good:#22c55e; --bad:#ef4444; --maybe:#f59e0b; }
    html,body { height:100%; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(180deg,#0b1220,#111827); color:var(--fg); }
    .wrap { max-width: 980px; margin: 0 auto; padding: 24px; }
    header { display:flex; align-items:center; gap:12px; justify-content:space-between; }
    h1 { font-size: clamp(22px, 3vw, 34px); margin:0; letter-spacing:.2px; }
    .card { background: linear-gradient(180deg, #0b1220 0%, #0e1626 100%); border:1px solid #1f2937; padding: 18px; border-radius: 14px; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .grid { display:grid; grid-template-columns: 1fr; gap: 16px; }
    @media(min-width:900px){ .grid { grid-template-columns: 2fr 1fr; } }
    .name { font-size: clamp(36px, 6vw, 64px); font-weight: 800; text-align:center; margin: 12px 0 6px; min-height: 1em;}
    .sub { text-align:center; color: var(--muted); font-size: 14px; min-height: 20px; }
    .controls { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top: 10px; }
    button { cursor:pointer; border:none; border-radius:12px; padding: 12px 16px; font-weight:700; background:#1f2937; color:var(--fg); transition: transform .05s ease, background .2s ease; }
    button:hover { background:#253043; }
    .btn-like{ background: rgba(34,197,94,.1); border:1px solid rgba(34,197,94,.4);} .btn-like:hover{ background: rgba(34,197,94,.2);} 
    .btn-dislike{ background: rgba(239,68,68,.1); border:1px solid rgba(239,68,68,.4);} .btn-dislike:hover{ background: rgba(239,68,68,.2);} 
    .btn-maybe{ background: rgba(245,158,11,.1); border:1px solid rgba(245,158,11,.4);} .btn-maybe:hover{ background: rgba(245,158,11,.2);} 
    .tag { background:#0b1220; border:1px solid #22304b; padding:4px 8px; border-radius:999px; font-size:12px; color:#9fb2d7 }
    .right p { color: var(--muted); font-size: 14px; margin: 0 0 10px; }
    .stack { display:flex; flex-direction:column; gap:10px; }
    label { display:block; font-size:13px; color:#9fb2d7; margin-bottom:4px; }
    input[type="text"], select { width:100%; background:#0b1220; border:1px solid #22304b; color:var(--fg); border-radius:10px; padding:10px 12px; }
    input[type="number"] { width:100%; background:#0b1220; border:1px solid #22304b; color:var(--fg); border-radius:10px; padding:10px 12px; }
    .pill { display:flex; gap:8px; flex-wrap:wrap; }
    .muted { color:var(--muted); font-size:12px; }
    .cols { display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    .list { max-height: 260px; overflow:auto; border:1px dashed #253043; border-radius:10px; padding:10px; }
    .list li { display:flex; justify-content:space-between; align-items:center; padding:6px 4px; border-bottom:1px dotted #1f2937; }
    .list li:last-child{ border-bottom:none; }
    .small { font-size:12px; }
    .footer { display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:12px; flex-wrap:wrap; }
    .mode { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
    .dot.g { background:var(--good);} .dot.r{ background:var(--bad);} .dot.y{ background:var(--maybe);} 
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üéÄ Juego de Nombres para Nenas</h1>
      <div class="mode">
        <label for="twoPlayer">Modo 2 jugadores</label>
        <input type="checkbox" id="twoPlayer" />
        <select id="currentPlayer" title="Jugador actual">
          <option value="P1">P1</option>
          <option value="P2">P2</option>
        </select>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: play area -->
      <div class="card">
        <div class="pill">
          <span class="tag" id="countLeft">0 por ver</span>
          <span class="tag" id="countShown">0 vistos</span>
          <span class="tag" id="countLiked"><span class="dot g"></span> <b id="likedNum">0</b> favoritos</span>
          <span class="tag" id="countMaybe"><span class="dot y"></span> <b id="maybeNum">0</b> "capaz"</span>
        </div>

        <div class="name" id="name">‚Äî</div>
        <div class="sub" id="meta">&nbsp;</div>

        <div class="controls">
          <button class="btn-dislike" id="btnNo">‚ùå No</button>
          <button class="btn-maybe" id="btnMaybe">ü§î Capaz</button>
          <button class="btn-like" id="btnYes">‚ù§Ô∏è Me gusta</button>
          <button id="btnNext">‚û°Ô∏è Siguiente</button>
          <button id="btnShuffle">üé≤ Aleatorio</button>
        </div>
      </div>

      <!-- RIGHT: filters and lists -->
      <div class="card right">
        <div class="stack">
          <div class="cols">
            <div>
              <label>Empieza con</label>
              <input id="startsWith" type="text" placeholder="Ej: M" maxlength="2" />
            </div>
            <div>
              <label>Termina en</label>
              <input id="endsWith" type="text" placeholder="Ej: a" maxlength="2" />
            </div>
          </div>
          <div class="cols">
            <div>
              <label>Origen</label>
              <select id="origin">
                <option value="">Cualquiera</option>
                <option>Latino</option>
                <option>Griego</option>
                <option>Hebreo</option>
                <option>Germ√°nico</option>
                <option>Italiano</option>
                <option>Franc√©s</option>
                <option>Ingl√©s</option>
                <option>√Årabe</option>
                <option>Vasco</option>
                <option>Mapuche</option>
                <option>Ruso</option>
                <option>S√°nscrito</option>
                <option>Espa√±ol</option>
              </select>
            </div>
            <div>
              <label>S√≠labas (m√°x.)</label>
              <input id="maxSyll" type="number" min="1" max="6" value="6" />
            </div>
          </div>
          <div class="footer">
            <div>
              <button id="btnApply">Aplicar filtros</button>
              <button id="btnReset">Reiniciar</button>
            </div>
            <div>
              <button id="btnExport">üì§ Exportar favoritos (CSV)</button>
              <button id="btnClear">üßπ Limpiar listas</button>
            </div>
          </div>
        </div>

        <hr style="border:none;border-top:1px solid #1f2937; margin:14px 0;"/>

        <div class="cols">
          <div>
            <p><b>Favoritos</b> <span class="muted small" id="favOwner">(solo)</span></p>
            <ul class="list" id="favList"></ul>
          </div>
          <div>
            <p><b>"Capaz"</b></p>
            <ul class="list" id="maybeList"></ul>
          </div>
        </div>

        <hr style="border:none;border-top:1px solid #1f2937; margin:14px 0;"/>
        <div class="stack">
          <div class="footer">
            <div><button id="btnMatches">üë• Ver coincidencias</button></div>
            <div><button id="btnExportMatches">üì§ Exportar coincidencias (CSV)</button></div>
          </div>
          <div class="cols">
            <div>
              <p><b>Favoritos en com√∫n (P1 & P2)</b></p>
              <ul class="list" id="matchFavs"></ul>
            </div>
            <div>
              <p><b>Compatibles (uno ‚ù§Ô∏è y otro ü§î)</b></p>
              <ul class="list" id="matchMixed"></ul>
            </div>
          </div>
          <p class="muted small">Tip: activ√° <b>Modo 2 jugadores</b>, cada uno marca ‚ù§Ô∏è/ü§î y luego toc√° <b>Ver coincidencias</b>.</p>
        </div>
      </div>
    </div>

    <p class="muted small" style="margin-top:14px">Consejo: us√° <b>üé≤ Aleatorio</b> para mezclar y <b>Aplicar filtros</b> para acotar por letra, final, origen o s√≠labas. Todo se guarda en tu navegador (localStorage).</p>
  </div>

  <script>
    // Utilidades
    function $(sel){ return document.querySelector(sel); }
    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); const t=a[i]; a[i]=a[j]; a[j]=t; } return a; }
    function syllables(es){ const m = (String(es).toLowerCase().match(/[aeiou√°√©√≠√≥√∫√º]+/g) || []); return m.length; }
    function dedupeBy(arr, key){ const m=new Map(); for(var i=0;i<arr.length;i++){ const it=arr[i]; const k=key(it); if(!m.has(k)) m.set(k,it);} return Array.from(m.values()); }

    // Datos base ‚Äì sin plantillas ni parseos
    const nameData = [
      {name:'Alba',origin:'Latino',meaning:'blanco'},
      {name:'Abril',origin:'Latino',meaning:'mes de abril'},
      {name:'Ail√©n',origin:'Mapuche',meaning:'alegre'},
      {name:'Alma',origin:'Latino',meaning:'alma'},
      {name:'Amalia',origin:'Germ√°nico',meaning:'trabajo'},
      {name:'Amanda',origin:'Latino',meaning:'amada'},
      {name:'Amparo',origin:'Latino',meaning:'protecci√≥n'},
      {name:'Ana',origin:'Hebreo',meaning:'gracia'},
      {name:'Anastasia',origin:'Griego',meaning:'resurrecci√≥n'},
      {name:'Andrea',origin:'Griego',meaning:'valent√≠a'},
      {name:'√Ångeles',origin:'Latino',meaning:'√°ngeles'},
      {name:'Antonella',origin:'Italiano',meaning:'valiosa'},
      {name:'Ariana',origin:'Italiano',meaning:'santa'},
      {name:'Azul',origin:'Latino',meaning:'color azul'},
      {name:'Bianca',origin:'Italiano',meaning:'blanca'},
      {name:'Brenda',origin:'Germ√°nico',meaning:'espada'},
      {name:'Camila',origin:'Latino',meaning:'mensajera'},
      {name:'Candela',origin:'Latino',meaning:'vela'},
      {name:'Carla',origin:'Germ√°nico',meaning:'fuerte'},
      {name:'Catalina',origin:'Griego',meaning:'pura'},
      {name:'C√©leste',origin:'Franc√©s',meaning:'celestial'},
      {name:'Clara',origin:'Latino',meaning:'clara'},
      {name:'Delfina',origin:'Latino',meaning:'delf√≠n'},
      {name:'Elena',origin:'Griego',meaning:'antorcha'},
      {name:'Elisa',origin:'Hebreo',meaning:'Dios es juramento'},
      {name:'Emma',origin:'Germ√°nico',meaning:'universal'},
      {name:'Emilia',origin:'Latino',meaning:'trabajo'},
      {name:'Eva',origin:'Hebreo',meaning:'vida'},
      {name:'Fabiana',origin:'Latino',meaning:'habas'},
      {name:'Florencia',origin:'Latino',meaning:'florecer'},
      {name:'Francesca',origin:'Italiano',meaning:'francesa'},
      {name:'Gala',origin:'Latino',meaning:'fiesta'},
      {name:'Guadalupe',origin:'√Årabe',meaning:'r√≠o oculto'},
      {name:'In√©s',origin:'Griego',meaning:'pura'},
      {name:'Isabella',origin:'Italiano',meaning:'Dios es juramento'},
      {name:'Jazm√≠n',origin:'√Årabe',meaning:'flor'},
      {name:'Jimena',origin:'Hebreo',meaning:'escuchar'},
      {name:'Julia',origin:'Latino',meaning:'juvenil'},
      {name:'Julieta',origin:'Latino',meaning:'peque√±a Julia'},
      {name:'Kiara',origin:'Italiano',meaning:'clara'},
      {name:'Lara',origin:'Latino',meaning:'protecci√≥n'},
      {name:'Laura',origin:'Latino',meaning:'laurel'},
      {name:'Leonor',origin:'Germ√°nico',meaning:'luz'},
      {name:'Lola',origin:'Espa√±ol',meaning:'dolores'},
      {name:'Luc√≠a',origin:'Latino',meaning:'luz'},
      {name:'Luna',origin:'Latino',meaning:'luna'},
      {name:'Malena',origin:'Hebreo',meaning:'gracia'},
      {name:'Manuela',origin:'Hebreo',meaning:'Dios con nosotros'},
      {name:'Martina',origin:'Latino',meaning:'consagrado a Marte'},
      {name:'Maya',origin:'Hebreo',meaning:'agua'},
      {name:'M√≠a',origin:'Italiano',meaning:'m√≠a'},
      {name:'Milagros',origin:'Latino',meaning:'milagros'},
      {name:'Mora',origin:'Latino',meaning:'mora'},
      {name:'Morena',origin:'Latino',meaning:'morena'},
      {name:'Nadia',origin:'Ruso',meaning:'esperanza'},
      {name:'Naomi',origin:'Hebreo',meaning:'agradable'},
      {name:'Natalia',origin:'Latino',meaning:'nacimiento'},
      {name:'Noa',origin:'Hebreo',meaning:'movimiento'},
      {name:'Olivia',origin:'Latino',meaning:'olivo'},
      {name:'Oriana',origin:'Latino',meaning:'aurora'},
      {name:'Paula',origin:'Latino',meaning:'peque√±a'},
      {name:'Pilar',origin:'Latino',meaning:'pilar'},
      {name:'Renata',origin:'Latino',meaning:'renacida'},
      {name:'Roc√≠o',origin:'Latino',meaning:'roc√≠o'},
      {name:'Sara',origin:'Hebreo',meaning:'princesa'},
      {name:'Sof√≠a',origin:'Griego',meaning:'sabidur√≠a'},
      {name:'Sol',origin:'Latino',meaning:'sol'},
      {name:'Tamara',origin:'Hebreo',meaning:'palmera'},
      {name:'Teresa',origin:'Griego',meaning:'cosechar'},
      {name:'Trinidad',origin:'Latino',meaning:'trinidad'},
      {name:'Uma',origin:'S√°nscrito',meaning:'brillo'},
      {name:'Valentina',origin:'Latino',meaning:'valiente'},
      {name:'Valeria',origin:'Latino',meaning:'fuerte'},
      {name:'Vera',origin:'Ruso',meaning:'fe'},
      {name:'Victoria',origin:'Latino',meaning:'victoria'},
      {name:'Violeta',origin:'Latino',meaning:'violeta'},
      {name:'Zoe',origin:'Griego',meaning:'vida'},
      {name:'Zaira',origin:'√Årabe',meaning:'flor que florece'},
      {name:'Aitana',origin:'Vasco',meaning:'gloria'},
      {name:'Maite',origin:'Vasco',meaning:'amada'},
      {name:'Amaia',origin:'Vasco',meaning:'fin'},
      {name:'Naiara',origin:'Vasco',meaning:'de N√°jera'},
      {name:'Ximena',origin:'Vasco',meaning:'escuchar'},
      {name:'Ainhoa',origin:'Vasco',meaning:'lugar de peregrinaje'}
    ];

    // Estado y referencias
    var deck = nameData.slice();
    var shown = new Set();
    var currentIdx = -1;

    var ui = {
      name: $('#name'), meta: $('#meta'),
      countLeft: $('#countLeft'), countShown: $('#countShown'), likedNum: $('#likedNum'), maybeNum: $('#maybeNum'),
      favList: $('#favList'), maybeList: $('#maybeList'), favOwner: $('#favOwner'),
      startsWith: $('#startsWith'), endsWith: $('#endsWith'), origin: $('#origin'), maxSyll: $('#maxSyll'),
      btnApply: $('#btnApply'), btnReset: $('#btnReset'), btnExport: $('#btnExport'), btnClear: $('#btnClear'),
      btnNo: $('#btnNo'), btnMaybe: $('#btnMaybe'), btnYes: $('#btnYes'), btnNext: $('#btnNext'), btnShuffle: $('#btnShuffle'),
      twoPlayer: $('#twoPlayer'), currentPlayer: $('#currentPlayer'),
      matchFavs: $('#matchFavs'), matchMixed: $('#matchMixed'),
      btnMatches: $('#btnMatches'), btnExportMatches: $('#btnExportMatches')
    };

    var LS = {
      soloFavs: 'girlname_solo_favs',
      soloMaybe: 'girlname_solo_maybe',
      p1Favs: 'girlname_p1_favs',
      p1Maybe: 'girlname_p1_maybe',
      p2Favs: 'girlname_p2_favs',
      p2Maybe: 'girlname_p2_maybe'
    };

    function getActiveStore(){
      if(!ui.twoPlayer.checked) return { fav: LS.soloFavs, maybe: LS.soloMaybe, label:'(solo)' };
      if(ui.currentPlayer.value === 'P1') return { fav: LS.p1Favs, maybe: LS.p1Maybe, label:'(P1)' };
      return { fav: LS.p2Favs, maybe: LS.p2Maybe, label:'(P2)' };
    }

    function loadList(key){ try{ var v = localStorage.getItem(key) || '[]'; return JSON.parse(v); }catch(e){ return []; } }
    function saveList(key, arr){ localStorage.setItem(key, JSON.stringify(dedupeBy(arr, function(x){return x.name.toLowerCase();}))); }

    function updateCounters(){
      ui.countLeft.textContent = (deck.length - shown.size) + ' por ver';
      ui.countShown.textContent = shown.size + ' vistos';
      var st = getActiveStore();
      ui.likedNum.textContent = loadList(st.fav).length;
      ui.maybeNum.textContent = loadList(st.maybe).length;
      ui.favOwner.textContent = ' ' + st.label;
    }

    function renderLists(){
      var st = getActiveStore();
      var favs = loadList(st.fav);
      var maybes = loadList(st.maybe);
      ui.favList.innerHTML = favs.map(function(n){ return '<li><span>'+n.name+'</span><button data-rm="'+n.name+'" data-where="fav">üóë</button></li>'; }).join('');
      ui.maybeList.innerHTML = maybes.map(function(n){ return '<li><span>'+n.name+'</span><button data-rm="'+n.name+'" data-where="maybe">üóë</button></li>'; }).join('');
      updateCounters();
    }

    function nextName(){
      if(deck.length === 0){
        ui.name.textContent = 'Sin resultados';
        ui.meta.textContent = 'Ajust√° los filtros o toc√° Reiniciar';
        updateCounters();
        return;
      }
      if(shown.size === deck.length){ shown = new Set(); }
      var safety=0;
      do { currentIdx = Math.floor(Math.random()*deck.length); safety++; if(safety>500) break; } while (shown.has(currentIdx));
      shown.add(currentIdx);
      var item = deck[currentIdx];
      if(!item){ ui.name.textContent='‚Äî'; ui.meta.textContent=''; return; }
      ui.name.textContent = item.name;
      ui.meta.textContent = [item.origin||'', item.meaning||''].filter(Boolean).join(' ‚Ä¢ ');
      updateCounters();
    }

    function applyFilters(){
      var sw = (ui.startsWith.value||'').trim().toLowerCase();
      var ew = (ui.endsWith.value||'').trim().toLowerCase();
      var or = (ui.origin.value||'').trim();
      var ms = parseInt(ui.maxSyll.value || '6', 10);

      deck = nameData.filter(function(n){
        var okStart = sw ? n.name.toLowerCase().indexOf(sw) === 0 : true;
        var okEnd = ew ? n.name.toLowerCase().slice(-ew.length) === ew : true;
        var okOrigin = or ? (n.origin === or) : true;
        var okSyl = syllables(n.name) <= ms;
        return okStart && okEnd && okOrigin && okSyl;
      });
      shown = new Set();
      shuffle(deck);
      nextName();
    }

    function resetFilters(){
      ui.startsWith.value=''; ui.endsWith.value=''; ui.origin.value=''; ui.maxSyll.value=6;
      deck = nameData.slice(); shown = new Set(); shuffle(deck); nextName();
    }

    function likeCurrent(type){
      var item = deck[currentIdx]; if(!item) return;
      var st=getActiveStore();
      var key = (type==='fav')? st.fav : st.maybe;
      var arr = loadList(key); arr.push(item); saveList(key, arr);
      renderLists(); nextName();
    }

    function removeFromList(where, name){
      var st=getActiveStore(); var key = (where==='fav')? st.fav : st.maybe;
      var arr = loadList(key).filter(function(x){ return x.name !== name; });
      saveList(key, arr); renderLists(); computeMatches();
    }

    function exportCSV(){
      var st = getActiveStore(); var favs = loadList(st.fav);
      var rows = [['Nombre','Origen','Significado']].concat(favs.map(function(n){ return [n.name,n.origin,n.meaning]; }));
      var csv = rows.map(function(r){ return r.map(function(v){ return '"' + String(v||'').replace(/"/g,'""') + '"'; }).join(','); }).join('\n');
      var blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
      var a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'favoritos.csv'; a.click(); URL.revokeObjectURL(a.href);
    }

    function computeMatches(){
      var p1F = loadList(LS.p1Favs); var p2F = loadList(LS.p2Favs);
      var p1M = loadList(LS.p1Maybe); var p2M = loadList(LS.p2Maybe);
      function toSet(arr){ var s=new Set(); for(var i=0;i<arr.length;i++){ s.add(arr[i].name.toLowerCase()); } return s; }
      var s1F = toSet(p1F), s2F = toSet(p2F), s1M = toSet(p1M), s2M = toSet(p2M);

      var commonFav = [];
      for(var i=0;i<p1F.length;i++){ if(s2F.has(p1F[i].name.toLowerCase())) commonFav.push(p1F[i]); }

      var mixed = [];
      for(var j=0;j<p1F.length;j++){ if(s2M.has(p1F[j].name.toLowerCase())) mixed.push(p1F[j]); }
      for(var k=0;k<p2F.length;k++){ if(s1M.has(p2F[k].name.toLowerCase())) mixed.push(p2F[k]); }
      mixed = dedupeBy(mixed, function(x){ return x.name.toLowerCase(); });

      function render(el, items){
        if(items.length===0){ el.innerHTML = '<li class="muted">(Sin coincidencias todav√≠a)</li>'; return; }
        el.innerHTML = items.map(function(n){ return '<li><span>'+n.name+'</span></li>'; }).join('');
      }
      render(ui.matchFavs, commonFav);
      render(ui.matchMixed, mixed);
      return { commonFav: commonFav, mixed: mixed };
    }

    function exportMatchesCSV(){
      var m = computeMatches();
      var rows = [['Tipo','Nombre']];
      for(var i=0;i<m.commonFav.length;i++){ rows.push(['Favoritos en com√∫n', m.commonFav[i].name]); }
      for(var j=0;j<m.mixed.length;j++){ rows.push(['Compatibles ‚ù§Ô∏è/ü§î', m.mixed[j].name]); }
      var csv = rows.map(function(r){ return r.map(function(v){ return '"' + String(v||'').replace(/"/g,'""') + '"'; }).join(','); }).join('\n');
      var blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
      var a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'coincidencias.csv'; a.click(); URL.revokeObjectURL(a.href);
    }

    // Eventos
    function bind(){
      ui.btnApply.addEventListener('click', applyFilters);
      ui.btnReset.addEventListener('click', resetFilters);
      ui.btnShuffle.addEventListener('click', function(){ shuffle(deck); shown=new Set(); nextName(); });
      ui.btnNext.addEventListener('click', nextName);
      ui.btnYes.addEventListener('click', function(){ likeCurrent('fav'); });
      ui.btnMaybe.addEventListener('click', function(){ likeCurrent('maybe'); });
      ui.btnNo.addEventListener('click', nextName);
      ui.btnExport.addEventListener('click', exportCSV);
      ui.btnClear.addEventListener('click', function(){ 
        var keys = Object.keys(LS); for(var i=0;i<keys.length;i++){ localStorage.removeItem(LS[keys[i]]); }
        renderLists(); computeMatches();
      });
      ui.twoPlayer.addEventListener('change', function(){ renderLists(); updateCounters(); computeMatches(); });
      ui.currentPlayer.addEventListener('change', function(){ renderLists(); updateCounters(); computeMatches(); });

      ui.favList.addEventListener('click', function(e){
        var t=e.target; if(t && t.tagName==='BUTTON'){ removeFromList(t.getAttribute('data-where'), t.getAttribute('data-rm')); }
      });
      ui.maybeList.addEventListener('click', function(e){
        var t=e.target; if(t && t.tagName==='BUTTON'){ removeFromList(t.getAttribute('data-where'), t.getAttribute('data-rm')); }
      });

      ui.btnMatches.addEventListener('click', computeMatches);
      ui.btnExportMatches.addEventListener('click', exportMatchesCSV);

      window.addEventListener('keydown', function(e){
        var tag = (document.activeElement && document.activeElement.tagName) || '';
        if(tag==='INPUT' || tag==='SELECT' || tag==='TEXTAREA') return;
        if(e.key==='ArrowLeft') ui.btnNo.click();
        else if(e.key==='ArrowUp') ui.btnMaybe.click();
        else if(e.key==='ArrowRight') ui.btnYes.click();
        else if(e.code==='Space') ui.btnNext.click();
      });
    }

    // Inicio
    document.addEventListener('DOMContentLoaded', function(){
      deck = nameData.slice();
      shuffle(deck);
      renderLists();
      updateCounters();
      nextName();
      computeMatches();
    });
    bind();
  </script>
</body>
</html>
